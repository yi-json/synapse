syntax = "proto3";

package v1;

option go_package = "github.com/yi-json/synapse/api/proto/v1";

service Scheduler {
    rpc RegisterWorker(RegisterRequest) returns (RegisterResponse);
    rpc SendHeartbeat(HeartbeatRequest) returns (HeartbeatResponse);
}

message RegisterRequest {
    string worker_id = 1;
    int32 cpu_cores = 2;
    int64 memory_bytes = 3;
    int32 port = 4;
}

message RegisterResponse {
    bool success = 1;
    string message = 2;
}

message HeartbeatRequest {
    string worker_id = 1;
    int32 current_load = 2; // e.g., CPU Usage %
    int32 active_jobs = 3; // # of containers being used
}

message HeartbeatResponse {
    bool acknowledge = 1;
}